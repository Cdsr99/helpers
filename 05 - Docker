#Instalando o Docker no Ubuntu
sudo apt update
sudo apt upgrade

#p.s favor atualizar o restante do passo a passo

#Dentro do seu projeto crie um arquivo com o nome "Dockerfile" e dentro do mesmo insira as seguintes informações

FROM node:20
WORKDIR /adonis_docker
COPY . .
RUN npm i
ENTRYPOINT node ace serve --watch 


#FROM seria o comando para buscar uma imagem já criada no Docker Hub, após os ":" seria a sua versão
#WORKDIR informa qual é o diretorio principal ou o diretorio raiz do docker
#COPY . . informa que os arquivos do diretorio atual devem ser copiados para o diretorio principal no docker (caminho setado no WORKDIR)
#RUN e ENTRYPOINT são comandos de execução

#Após criar o arquivo, basta roda o seguinte comando para criar a imagem
docker build -t caiorodrigues/adonis-docker:1 .

/*
Onde o caiorodrigues/adonis-docker seria o nome da imagem, isso poderia se chamar de qualquer outro nome.
após os : (dois pontos) seria a versão da imagem do seu docker
e o "." você estaria informando onde o mesmo deverá rodar
/**/

#Após criar a sua imagem execute o seguinte comando para validar o mesmo
docker images

#E para executar o docker basta rodar o seguinte comando
docker run -d -p 80:3333 caiorodrigues/adonis-docker:1



#Para parar todos os dockers você pode usar o seguinte comando
docker stop $(docker container ls -q)

#onde:
#"-q" você está informando que é para puxar o ID da sista


#Para publicar o seu container no Docker Hub, o primeiro passo será logar na sua conta.
docker login -u <seu_login>

#digite a sua senha

#Após disso basta dar o seguinte comando
docker push <nome_docker>:<versao>



#Para remover os dockers criados
docker container rm $(docker container ls -aq)

#Para remover as imagens do docker
docker rmi $(docker image ls -aq)  //uma opção seria add "--force"

#Para criar um espaço de memoria na máquina, basta usar o seguinte comando
docker run -it -v /home/<username>/Documents/<seu_diretorio>:<diretorio no docker> ubuntu bash

/*
Onde?
-it: serve para roda de uma forma interagida, ou seja abre o terminal do docker
-v: cria os espaços entre as maquinas (locahost e o docker)
primeiro caminho até os ":" informa o local onde você deseja salvar os arquivos na sua máquina
após os ":" seria onde você vai jogar os arquivos no docker, para os arquivos irem para sua maquina
ubuntu: seria o container, poderia ser qualquer outro, como o nosso criado por exemplo, caiorodrigues2/adonis-docker
bash: para entrar no terminal
*/


#criando volume de uma forma mais facil
docker volume create meu-volume

docker run -it -v meu-volume:<diretorio no docker> ubuntu bash

#esse "meu-volume" fica alocado no seguinte caminho no seu host /var/lib/docker

/*************************************************************************************************************/
/*                                                                                                           */                                                                                                
/*                                                                                                           */
/*                    Network                                                                                */
/*                                                                                                           */
/*                                                                                                           */
/*************************************************************************************************************/

#Listando as networks
docker network ls

#Criando uma network
docker network create richpay

#criando containers na mesma rede
docker run -d --network <nome_network> ubuntu  





