#Instalando o Docker no Ubuntu
sudo apt update
sudo apt upgrade

#p.s favor atualizar o restante do passo a passo

#Dentro do seu projeto crie um arquivo com o nome "Dockerfile" e dentro do mesmo insira as seguintes informações

FROM node:20
WORKDIR /adonis_docker
COPY . .
RUN npm i
ENTRYPOINT node ace serve --watch 


#FROM seria o comando para buscar uma imagem já criada no Docker Hub, após os ":" seria a sua versão
#WORKDIR informa qual é o diretorio principal ou o diretorio raiz do docker
#COPY . . informa que os arquivos do diretorio atual devem ser copiados para o diretorio principal no docker (caminho setado no WORKDIR)
#RUN e ENTRYPOINT são comandos de execução

#Após criar o arquivo, basta roda o seguinte comando para criar a imagem
docker builder -t caiorodrigues/adonis-docker:1 .

/*
Onde o caiorodrigues/adonis-docker seria o nome da imagem, isso poderia se chamar de qualquer outro nome.
após os : (dois pontos) seria a versão da imagem do seu docker
e o "." você estaria informando onde o mesmo deverá rodar
/**/

#Após criar a sua imagem execute o seguinte comando para validar o mesmo
docker images

#E para executar o docker basta rodar o seguinte comando
docker run -d -p 80:3333 caiorodrigues/adonis-docker:1



#Para parar todos os dockers você pode usar o seguinte comando
docker stop $(docker container ls -q)

#onde:
#"-q" você está informando que é para puxar o ID da sista


#Para publicar o seu container no Docker Hub, o primeiro passo será logar na sua conta.
docker login -u <seu_login>

#digite a sua senha

#Após disso basta dar o seguinte comando
docker push <nome_docker>:<versao>



#Para remover os dockers criados
docker container rm $(docker container ls -aq)

#Para remover as imagens do docker
docker rmi $(docker image ls -aq)  //uma opção seria add "--force"

